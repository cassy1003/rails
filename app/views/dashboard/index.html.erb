<% content_for :header_body do %>
  <% if @shop.present? %>
    <!-- Card stats -->
    <div class="row">
      <div class="col-md-4">
        <div class="card card-stats">
          <!-- Card body -->
          <div class="card-body">
            <div class="row">
              <div class="col">
                <h5 class="card-title text-uppercase text-muted mb-0">Today Sales</h5>
                <span class="h2 font-weight-bold mb-0 text-primary">￥5,789</span>
              </div>
            </div>
            <p class="mt-3 mb-0 text-sm text-right">
              <span class="text-nowrap mr-2">Yesterday Sales</span>
              <span class="text-nowrap">￥11,234</span>
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card card-stats">
          <!-- Card body -->
          <div class="card-body">
            <div class="row">
              <div class="col">
                <h5 class="card-title text-uppercase text-muted mb-0">This Month Sales</h5>
                <span class="h2 font-weight-bold mb-0 text-primary">￥126,789</span>
              </div>
            </div>
            <p class="mt-3 mb-0 text-sm text-right">
              <span class="text-nowrap mr-2">Last Month Sales</span>
              <span class="text-nowrap">￥231,765</span>
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card card-stats">
          <!-- Card body -->
          <div class="card-body">
            <div class="row">
              <div class="col">
                <h5 class="card-title text-uppercase text-muted mb-0">This Year Sales</h5>
                <span class="h2 font-weight-bold mb-0 text-primary">￥987,234</span>
              </div>
            </div>
            <p class="mt-3 mb-0 text-sm text-right">
              <span class="text-nowrap mr-2">Last Year Sales</span>
              <span class="text-nowrap">￥1,238,765</span>
            </p>
          </div>
        </div>
      </div>
    </div>
  <% else %>
    <div class="row">
      <div class="col">
        <div class="card">
          <!-- Card header -->
          <div class="card-header border-0">
            <h3 class="mb-0"><%= t '.shop_new.title' %></h3>
          </div>
          <div class="card-footer py-4">
            <div class="text-muted text-center mb-3">
              <%= t '.shop_new.description' %>
            </div>
            <div class="btn-wrapper text-center">
              <a href="<%= @base_auth_url %>" class="base-link btn btn-neutral btn-icon">
                <span class="btn-inner--icon">
                  <%= image_tag 'base.png' %>
                </span>
              </a>
            </div>
            <div class="text-muted text-center mt-5">
              <small><%= t '.shop_new.notice' %></small>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>
<% end %>

<% if @shop.present? %>
  <!-- Page content -->
  <div class="container-fluid mt--6 content-body">
    <div class="row">
      <div class="col-xl-5">
        <div class="card bg-default">
          <div class="card-header bg-transparent">
            <div class="row align-items-center">
              <div class="col">
                <h6 class="text-uppercase text-light ls-1 mb-1">Recently 7 days</h6>
                <h5 class="h3 text-white mb-0">Daily Sales</h5>
              </div>
            </div>
          </div>
          <div class="card-body">
            <!-- Chart -->
            <div class="chart">
              <canvas id="chart-bars" class="chart-canvas"></canvas>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-7">
        <div class="card">
          <div class="card-header bg-transparent">
            <div class="row align-items-center">
              <div class="col">
                <h6 class="text-muted text-uppercase ls-1 mb-1">Recently 12 months</h6>
                <h5 class="h3 mb-0">Monthly Sales</h5>
              </div>
            </div>
          </div>
          <div class="card-body">
            <!-- Chart -->
            <div class="chart">
              <!-- Chart wrapper -->
              <canvas id="chart-sales-dark" class="chart-canvas"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xl-12">
        <div class="card">
          <div class="card-header border-0">
            <div class="row align-items-center">
              <div class="col">
                <h3 class="mb-0">New Orders List</h3>
              </div>
              <div class="col text-right">
                <a href="#!" class="btn btn-sm btn-primary">See all</a>
              </div>
            </div>
          </div>
          <div class="table-responsive">
            <!-- Projects table -->
            <table class="table align-items-center table-flush">
              <thead class="thead-light">
                <tr>
                  <th scope="col">Order Date</th>
                  <th scope="col">Status</th>
                  <th scope="col">Customer Name</th>
                  <th scope="col">Price</th>
                  <th scope="col">Payment</th>
                  <th scope="col"></th>
                </tr>
              </thead>
              <tbody>
                <% @base_orders['orders'].each do |order| %>
                  <tr>
                    <th scope="row">
                      <%= Time.at(order['ordered']).strftime('%Y/%m/%d %H:%M') %>
                    </th>
                    <td>
                      <%= order['dispatch_status'] %>
                    </td>
                    <td>
                      <%= order['last_name'] + ' ' + order['first_name'] %>
                    </td>
                    <td>
                      <%= order['total'].to_s(:delimited) %>
                    </td>
                    <td>
                      <%= order['payment'] %>
                    </td>
                    <td class="text-right">
                      <a href="/dashboard/order/<%= order['unique_key'] %>">
                        <i class="ni ni-bold-right"></i>
                      </a>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xl-6">
        <div class="card">
          <div class="card-header border-0">
            <div class="row align-items-center">
              <div class="col">
                <h3 class="mb-0">Sales List</h3>
              </div>
              <div class="col text-right">
                <a href="#!" class="btn btn-sm btn-primary">See all</a>
              </div>
            </div>
          </div>
          <div class="table-responsive">
            <!-- Projects table -->
            <table class="table align-items-center table-flush">
              <thead class="thead-light">
                <tr>
                  <th scope="col">Year/Month</th>
                  <th scope="col">Price</th>
                  <th scope="col">Profit</th>
                  <th scope="col">Profit Rate</th>
                </tr>
              </thead>
              <tbody>
                <% d = 1.day.ago %>
                <% 12.times do |i| %>
                  <% p = rand(20000..50000) %>
                  <% r = rand(70..80) + rand(9) / 10.0 %>
                  <tr>
                    <th scope="row">
                      <%= d.ago(i.month).strftime('%Y/%m') %>
                    </th>
                    <td>
                      ¥<%= p.to_s(:delimited) %>
                    </td>
                    <td>
                      ¥<%= (p * r / 100).to_i.to_s(:delimited) %>
                    </td>
                    <td>
                      <%= r %>%
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="col-xl-6">
        <div class="card">
          <div class="card-header border-0">
            <div class="row align-items-center">
              <div class="col">
                <h3 class="mb-0">Item Sales Ranking</h3>
              </div>
              <div class="col text-right">
                <a href="#!" class="btn btn-sm btn-primary">See all</a>
              </div>
            </div>
          </div>
          <div class="table-responsive">
            <!-- Projects table -->
            <table class="table align-items-center table-flush">
              <thead class="thead-light">
                <tr>
                  <th scope="col">Ranking</th>
                  <th scope="col">Item Name</th>
                  <th scope="col">Count</th>
                  <th scope="col">Last Ranking</th>
                </tr>
              </thead>
              <tbody>
                <% 5.times do |i| %>
                  <tr>
                    <th scope="row">
                      Rank <%= i + 1 %>
                    </th>
                    <td>
                      Item Name <%= i %>-<%= ('A'..'Z').to_a[rand(26)] %>
                    </td>
                    <td>
                      <% c = 50 - (i + 2) * i %>
                      <%= c %>
                    </td>
                    <td>
                      <% r = [4, 1, 5, 2, 6][i] %>
                      Rank <%= r %> <i class="fas fa-arrow-<%= i + 1 < r ? 'up' : 'down' %> text-<%= i + 1 < r ? 'success' : 'warning' %> ml-3"></i>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>
